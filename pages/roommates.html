<!--
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>MyHDBSense | Roommates</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="../assets/style.css"/>
  <style>
    .rm-card { border:1px solid #e7ecf2; border-radius:14px; box-shadow:0 6px 14px rgba(10,31,68,.06); }
    .rm-card:hover { box-shadow:0 10px 22px rgba(10,31,68,.1); transform:translateY(-1px); }
    .rm-photo-wrap { height: 210px; }
    .rm-photo { width:100%; height:100%; object-fit:cover; border-radius:14px 0 0 14px; }
    .rm-title { font-weight:800; margin-bottom:.25rem; }
    .rm-meta { color:#556070; font-size:.95rem; }
    .rm-actions .btn { border-radius:999px; }
    @media (max-width: 767.98px){
      .rm-photo-wrap{ height: 180px; }
      .rm-photo{ border-radius:14px 14px 0 0; }
    }
    #profileModal .modal-dialog { max-width: 640px; }
    #profileModal .img-lg { width:100%; height:260px; object-fit:cover; border-radius:12px; }
  </style>
</head>
<body>
  <div data-include="../assets/components/navbar.html"></div>
  <div data-include="../assets/components/backhome.html"></div>
  <section class="container py-4">
    <h3 class="fw-bold mb-3">Find a Roommate</h3>
    <div class="card shadow-sm mb-4">
      <div class="card-body">
        <form id="rmForm" class="row g-3">
          <div class="col-md-4">
            <label class="form-label">Preferred Area (Town)</label>
            <input class="form-control" name="area" placeholder="e.g. QUEENSTOWN">
          </div>
          <div class="col-md-4">
            <label class="form-label">Max Budget ($/month)</label>
            <input class="form-control" type="number" name="budget" placeholder="1000">
          </div>
          <div class="col-md-4">
            <label class="form-label">Lifestyle</label>
            <select class="form-select" name="lifestyle">
              <option value="">Any</option>
              <option value="Quiet">Quiet</option>
              <option value="Social">Social</option>
              <option value="Active">Active</option>
            </select>
          </div>
          <div class="col-12 d-flex gap-2">
            <button class="btn btn-primary" type="submit"><i class="bi bi-search me-1"></i>Search Matches</button>
            <button type="reset" class="btn btn-outline-secondary">Reset</button>
          </div>
        </form>
      </div>
    </div>
    <div class="row g-3" id="rmResults"></div>
  </section>
  <footer class="text-center py-3 text-muted small">© 2025 MyHDBSense. All rights reserved.</footer>
  <div class="modal fade" id="profileModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content border-0 shadow-lg rounded-4 overflow-hidden">
        <div class="text-white d-flex align-items-center justify-content-between px-4 py-3" style="background:#111827;">
          <div>
            <h5 id="pmName" class="fw-bold mb-0">Roommate</h5>
            <div id="pmArea" class="small opacity-75"></div>
          </div>
          <button type="button" class="btn btn-sm btn-light rounded-pill" data-bs-dismiss="modal">Close</button>
        </div>
        <div class="modal-body p-4">
          <img id="pmImg" class="img-lg mb-3" alt="Profile photo">
          <div id="pmMeta" class="mb-2 text-muted"></div>
          <p id="pmAbout" class="mb-3"></p>
          <div class="d-flex flex-wrap gap-2">
            <a id="pmEmail" class="btn btn-dark rounded-pill">
              <i class="bi bi-envelope me-1"></i> Connect via Email
            </a>
            <a id="pmWhatsApp" class="btn btn-outline-success rounded-pill">
              <i class="bi bi-whatsapp me-1"></i> WhatsApp
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../assets/main.js"></script>
  <script>
    const profiles = [
      { id:1, name:"Alicia Tan", area:"QUEENSTOWN", budget:900,  lifestyle:"Quiet",  about:"Data analyst, neat, prefers quiet evenings.", img:"https://images.unsplash.com/photo-1544005313-94ddf0286df2", email:"alicia@example.com", whatsapp:"6588000001" },
      { id:2, name:"Zafirah",    area:"JURONG",     budget:1100, lifestyle:"Social", about:"Friendly, loves cooking, okay with small gatherings.", img:"https://images.unsplash.com/photo-1547425260-76bcadfb4f2c", email:"zafirah@example.com", whatsapp:"6588000002" },
      { id:3, name:"Ken Lim",    area:"ANG MO KIO", budget:1200, lifestyle:"Active", about:"Gym after work, early riser, tidy.",               img:"https://images.unsplash.com/photo-1544723795-3fb6469f5b39", email:"ken.lim@example.com", whatsapp:"6588000003" },
      { id:4, name:"Priya",      area:"TAMPINES",   budget:800,  lifestyle:"Quiet",  about:"Teacher, organized, prefers clean shared spaces.",img:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1", email:"priya@example.com", whatsapp:"6588000004" }
    ];
    const results = document.getElementById("rmResults");
    const card = (p)=>`
      <div class="col-md-6">
        <div class="rm-card h-100 p-2">
          <div class="row g-0 h-100">
            <div class="col-12 col-md-4">
              <div class="rm-photo-wrap">
                <img src="${p.img}" alt="${p.name}" class="rm-photo">
              </div>
            </div>
            <div class="col-12 col-md-8 d-flex">
              <div class="p-3 d-flex flex-column justify-content-between w-100">
                <div>
                  <div class="rm-title h5">${p.name}</div>
                  <div class="rm-meta">${p.area} • Budget: $${p.budget}/mo • ${p.lifestyle}</div>
                  <p class="mb-0 mt-2">${p.about}</p>
                </div>
                <div class="rm-actions mt-3 d-flex gap-2">
                  <button class="btn btn-outline-primary btn-sm" data-view="${p.id}">
                    <i class="bi bi-person-vcard me-1"></i> View Profile
                  </button>
                  <a class="btn btn-primary btn-sm" href="mailto:${p.email}?subject=Roommate%20Interest:%20${encodeURIComponent(p.name)}&body=Hi%20${encodeURIComponent(p.name)},%0A%0AI%20came%20across%20your%20profile%20on%20MyHDBSense%20and%20would%20love%20to%20connect.%0A%0ARegards,%0A"
                     target="_blank" rel="noopener">
                    <i class="bi bi-envelope me-1"></i> Connect
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>`;
    function render(list) {
      results.innerHTML = list.length
        ? list.map(card).join("")
        : `<div class="col-12 text-center text-muted">No matches. Try widening your filters.</div>`;
      results.querySelectorAll('[data-view]').forEach(btn=>{
        btn.addEventListener('click', () => openModal(Number(btn.getAttribute('data-view'))));
      });
      results.querySelectorAll('.rm-card').forEach(cardEl=>{
        cardEl.addEventListener('click', (e)=>{
          const btn = cardEl.querySelector('[data-view]');
          if (!e.target.closest('a,button')) btn.click();
        });
      });
    }
    render(profiles);
    document.getElementById("rmForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const fd = new FormData(e.target);
      const area = (fd.get("area") || "").toUpperCase();
      const budget = Number(fd.get("budget") || 999999);
      const lifestyle = fd.get("lifestyle") || "";
      const matches = profiles.filter(p =>
        (!area || p.area.includes(area)) &&
        (isNaN(budget) || p.budget <= budget) &&
        (!lifestyle || p.lifestyle === lifestyle)
      );
      render(matches);
    });
    document.getElementById("rmForm").addEventListener("reset", () => {
      setTimeout(() => render(profiles), 80);
    });
    const pm = {
      img: document.getElementById('pmImg'),
      name: document.getElementById('pmName'),
      area: document.getElementById('pmArea'),
      meta: document.getElementById('pmMeta'),
      about: document.getElementById('pmAbout'),
      email: document.getElementById('pmEmail'),
      wa: document.getElementById('pmWhatsApp'),
      modal: new bootstrap.Modal(document.getElementById('profileModal'))
    };
    function openModal(id){
      const p = profiles.find(x=>x.id===id);
      if(!p) return;
      pm.img.src = p.img;
      pm.img.alt = p.name;
      pm.name.textContent = p.name;
      pm.area.textContent = p.area;
      pm.meta.textContent = `Budget: $${p.budget}/mo • Lifestyle: ${p.lifestyle}`;
      pm.about.textContent = p.about;
      pm.email.href = `mailto:${p.email}?subject=Roommate%20Interest:%20${encodeURIComponent(p.name)}&body=Hi%20${encodeURIComponent(p.name)},%0A%0AI%20came%20across%20your%20profile%20on%20MyHDBSense%20and%20would%20love%20to%20connect.%0A%0ARegards,%0A`;
      pm.wa.href = `https://wa.me/${p.whatsapp}?text=${encodeURIComponent('Hi '+p.name+', I saw your roommate profile on MyHDBSense and would like to connect!')}`;
      pm.modal.show();
    }
  </script>
</body>
</html>
